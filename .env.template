# ============================================================================
# 壓差儀監測工具環境變數配置模板
# ============================================================================
# 使用說明：
# 1. 複製此檔案為 .env: cp .env.template .env
# 2. 根據您的設備配置修改下面的值
# 3. 載入環境變數: source .env
# 4. 運行程式: ./pressure-meter
# ============================================================================

# ----------------------------------------------------------------------------
# 🔌 設備連接配置
# ----------------------------------------------------------------------------

# RS485 設備路徑
# Linux 示例: /dev/ttyUSB0, /dev/ttyACM0, /dev/ttyS0
# Windows 示例: COM1, COM2, COM3
# macOS 示例: /dev/cu.usbserial-0001
PRESSURE_DEVICE=/dev/ttyUSB0

# Modbus 從站ID (1-247)
# 十進制格式: 22
# 十六進制格式: 0x16 (等於十進制 22)
PRESSURE_SLAVE_ID=22

# 串口波特率 (通常為 9600)
# 支援的值: 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200
PRESSURE_BAUD_RATE=9600

# ----------------------------------------------------------------------------
# 📊 數據格式配置
# ----------------------------------------------------------------------------

# 數據格式類型
# decimal 或 0: 十進制格式 (數據擴大10倍，需要除以10)
# float 或 1: IEEE 754 浮點數格式
PRESSURE_DATA_FORMAT=decimal

# 壓力單位
# Pa: 帕斯卡 (默認)
# kPa: 千帕
# mbar: 毫巴
# psi: 磅/平方英寸
# mmH2O: 毫米水柱
PRESSURE_UNIT=Pa

# ----------------------------------------------------------------------------
# ⏱️ 時間配置
# ----------------------------------------------------------------------------

# 壓力讀取間隔
# 格式: 數字+單位 (s=秒, m=分鐘, h=小時, ms=毫秒)
# 示例: 1s, 500ms, 2m, 0.5s
PRESSURE_READ_INTERVAL=1s

# 連接超時時間
PRESSURE_TIMEOUT=5s

# 掃描超時時間 (用於自動掃描)
PRESSURE_SCAN_TIMEOUT=2s

# ----------------------------------------------------------------------------
# 📝 日誌配置
# ----------------------------------------------------------------------------

# 日誌檔案路徑 (可選，留空則輸出到控制台)
# Linux/macOS: /var/log/pressure.log, ./logs/pressure.log
# Windows: C:\logs\pressure.log, .\logs\pressure.log
LOG_FILE=

# 日誌級別
# debug: 詳細調試信息
# info: 一般信息 (默認)
# warn: 警告信息
# error: 僅錯誤信息
LOG_LEVEL=info

# 是否啟用詳細輸出
# true: 啟用詳細輸出
# false: 正常輸出
VERBOSE=false

# ----------------------------------------------------------------------------
# 📊 輸出格式配置
# ----------------------------------------------------------------------------

# 輸出格式
# text: 文本格式 (默認)
# json: JSON 格式
# csv: CSV 格式
OUTPUT_FORMAT=text

# 最大讀數數量 (0 表示無限制)
MAX_READINGS=0

# 運行時間限制 (0 表示無限制)
# 格式: 數字+單位 (s=秒, m=分鐘, h=小時)
# 示例: 30s, 5m, 1h, 24h
DURATION=0

# ----------------------------------------------------------------------------
# 🔧 高級配置
# ----------------------------------------------------------------------------

# 是否啟用自動掃描
# true: 程式啟動時自動掃描設備
# false: 使用指定配置
AUTO_SCAN=false

# 掃描模式
# quick: 快速掃描 (僅常用參數)
# full: 完整掃描 (所有可能的參數)
SCAN_MODE=quick

# 是否啟用守護程序模式
# true: 後台運行
# false: 前台運行
DAEMON=false

# 配置檔案路徑 (可選)
CONFIG_FILE=

# 是否跳過配置驗證
# true: 跳過嚴格驗證
# false: 進行完整驗證 (推薦)
SKIP_VALIDATION=false

# ----------------------------------------------------------------------------
# 🌐 網路配置 (未來擴展用)
# ----------------------------------------------------------------------------

# HTTP 服務端口 (如果啟用 Web 界面)
# HTTP_PORT=8080

# API 端點前綴
# API_PREFIX=/api/v1

# 是否啟用 CORS
# ENABLE_CORS=true

# ----------------------------------------------------------------------------
# 📈 監控和告警配置 (未來擴展用)
# ----------------------------------------------------------------------------

# 壓力告警閾值 (Pa)
# ALARM_HIGH_THRESHOLD=1000
# ALARM_LOW_THRESHOLD=-1000

# 告警通知方式
# ALARM_NOTIFICATION=email,webhook

# 數據保存配置
# DATA_RETENTION_DAYS=30
# DATABASE_URL=sqlite:///pressure.db

# ----------------------------------------------------------------------------
# 🔐 安全配置 (未來擴展用)
# ----------------------------------------------------------------------------

# API 密鑰 (如果啟用 API)
# API_KEY=your-secret-api-key-here

# JWT 密鑰 (如果啟用認證)
# JWT_SECRET=your-jwt-secret-here

# ----------------------------------------------------------------------------
# 🐳 Docker 配置
# ----------------------------------------------------------------------------

# Docker 容器名稱
CONTAINER_NAME=pressure-meter

# Docker 鏡像標籤
IMAGE_TAG=latest

# 是否啟用特權模式 (訪問串口設備需要)
DOCKER_PRIVILEGED=true

# 設備映射 (Docker 中訪問宿主機串口)
DOCKER_DEVICE_MAPPING=/dev/ttyUSB0:/dev/ttyUSB0

# ----------------------------------------------------------------------------
# 🔧 開發和調試配置
# ----------------------------------------------------------------------------

# 開發模式
# true: 啟用開發模式 (更多調試信息)
# false: 生產模式
DEV_MODE=false

# 是否啟用性能分析
# true: 啟用 pprof 性能分析
# false: 關閉性能分析
ENABLE_PROFILING=false

# 調試端口 (如果啟用調試)
# DEBUG_PORT=6060

# 測試模式
# true: 啟用測試模式 (模擬數據)
# false: 正常模式
TEST_MODE=false

# ----------------------------------------------------------------------------
# 📋 系統信息 (自動填充，無需修改)
# ----------------------------------------------------------------------------

# 應用程式版本 (由編譯時設置)
# APP_VERSION=1.0.0

# 構建時間 (由編譯時設置)
# BUILD_TIME=2024-01-01T00:00:00Z

# Git 提交哈希 (由編譯時設置)
# GIT_COMMIT=abc123def456

# ============================================================================
# 使用示例
# ============================================================================

# 基本使用 (最小配置):
# PRESSURE_DEVICE=/dev/ttyUSB0
# PRESSURE_SLAVE_ID=22

# 完整配置示例:
# PRESSURE_DEVICE=/dev/ttyUSB0
# PRESSURE_SLAVE_ID=22
# PRESSURE_DATA_FORMAT=decimal
# PRESSURE_READ_INTERVAL=1s
# LOG_FILE=./logs/pressure.log
# OUTPUT_FORMAT=json
# VERBOSE=true

# Docker 使用示例:
# PRESSURE_DEVICE=/dev/ttyUSB0
# CONTAINER_NAME=my-pressure-meter
# DOCKER_PRIVILEGED=true
# LOG_FILE=/var/log/pressure.log

# ============================================================================
# 注意事項
# ============================================================================

# 1. 🔌 確保 RS485 設備已正確連接
# 2. 🔑 確保用戶有權限訪問串口設備 (可能需要加入 dialout 組)
# 3. 📝 日誌檔案目錄必須存在且有寫入權限
# 4. 🔢 從站ID 必須與實際設備配置一致
# 5. 🚀 首次使用建議先運行 --auto-scan 自動檢測設備
# 6. 🧪 可以使用 --test-config 測試配置是否正確
# 7. 🐳 Docker 環境中需要映射設備和設置特權模式

# ============================================================================
# 故障排除
# ============================================================================

# 如果遇到問題，請檢查：
# 1. 設備路徑是否正確: ls -la /dev/tty*
# 2. 權限是否足夠: sudo usermod -a -G dialout $USER
# 3. 設備是否被其他程式占用: lsof /dev/ttyUSB0
# 4. 波特率和從站ID是否匹配設備配置
# 5. 使用自動掃描確認設備: ./pressure-meter --auto-scan
